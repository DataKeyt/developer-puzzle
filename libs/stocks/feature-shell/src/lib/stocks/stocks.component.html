<main role="main">
  <form [formGroup]="stockPickerForm">
    <mat-form-field hideRequiredMarker>
      <mat-label for="symbol-input">{{
        CONSTANTS.SYMBOL_PLACEHOLDER
      }}</mat-label>
      <input
        matInput
        id="symbol-input"
        formControlName="symbol"
        type="text"
        value=""
        autofocus
        required
      />
      <mat-error *ngIf="!symbolInput.valid && symbolInput.touched"
        >{{ CONSTANTS.SYMBOL_MISSING_ERROR }}
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label for="period-selection">{{
        CONSTANTS.TIME_PERIOD_LABEL
      }}</mat-label>
      <mat-select formControlName="period" id="period-selection">
        <mat-option
          *ngFor="let timePeriod of CONSTANTS.TIME_PERIODS"
          [value]="timePeriod.value"
        >
          {{ timePeriod.viewValue }}
        </mat-option>
      </mat-select>
      <mat-error
        *ngIf="periodInput.hasError('required') && periodInput.touched"
        >{{ CONSTANTS.PERIOD_SELECTION_ERROR }}</mat-error
      >
    </mat-form-field>
  </form>

  <div aria-live="polite">
    <mat-progress-bar
      aria-label="Content is loading"
      mode="indeterminate"
      *ngIf="(loading$ | async)"
    ></mat-progress-bar>
  </div>

  <mat-error *ngIf="(error$ | async) as errorMessage">
    {{ CONSTANTS.ERROR_OCCURRED }} {{ errorMessage }}.
  </mat-error>
</main>

<section aria-live="polite">
  <coding-challenge-chart [data$]="quotes$"></coding-challenge-chart>
</section>
