<main role="main">
  <form [formGroup]="stockPickerForm">
    <mat-form-field hideRequiredMarker>
      <mat-label for="symbol-input">{{
        CONSTANTS.SYMBOL_PLACEHOLDER
      }}</mat-label>
      <input
        matInput
        id="symbol-input"
        formControlName="symbol"
        type="text"
        value=""
        autofocus
        required
      />
      <mat-error
        ><span
          *ngIf="
            !stockPickerForm.get('symbol').valid &&
            stockPickerForm.get('symbol').touched
          "
          >{{ CONSTANTS.SYMBOL_MISSING_ERROR }}</span
        >
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label for="period-selection">{{
        CONSTANTS.TIME_PERIOD_LABEL
      }}</mat-label>
      <mat-select formControlName="period" id="period-selection">
        <mat-option
          *ngFor="let timePeriod of CONSTANTS.TIME_PERIODS"
          [value]="timePeriod.value"
        >
          {{ timePeriod.viewValue }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="stockPickerForm.get('period').hasError('required')">{{
        CONSTANTS.PERIOD_SELECTION_ERROR
      }}</mat-error>
    </mat-form-field>

    <button
      role="button"
      aria-label="Request stocks data"
      (click)="fetchQuote()"
      mat-raised-button
    >
      {{ CONSTANTS.BUTTON_TEXT }}
    </button>
  </form>
</main>

<section aria-live="polite">
  <coding-challenge-chart [data$]="quotes$ | async"></coding-challenge-chart>
</section>
